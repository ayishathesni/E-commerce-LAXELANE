<%- include("../../views/partials/user/header") %>

<main class="main">
  <!-- Intro Slider (Static for now) -->
  <div class="intro-slider-container">
    <div class="intro-slider owl-carousel owl-theme owl-nav-inside owl-light" data-toggle="owl" data-owl-options='{
        "dots": false,
        "nav": false,
        "responsive": {
          "992": {
            "nav": true
          }
        }
      }'>
      <div class="intro-slide" style="background-image: url(assets/images/demos/demo-6/slider/slide-1.jpg);">
        <div class="container intro-content text-center">
          <h3 class="intro-subtitle text-white">You're Looking Good</h3>
          <h1 class="intro-title text-white">New Lookbook</h1>
          <a href="/shop" class="btn btn-outline-white-4"><span>Discover More</span></a>
        </div>
      </div>
      <div class="intro-slide" style="background-image: url(assets/images/demos/demo-6/slider/slide-2.jpg);">
        <div class="container intro-content text-center">
          <h3 class="intro-subtitle text-white">Donâ€™t Miss</h3>
          <h1 class="intro-title text-white">Mystery Deals</h1>
          <a href="/shop" class="btn btn-outline-white-4"><span>Discover More</span></a>
        </div>
      </div>
    </div>
    <span class="slider-loader"></span>
  </div>

  <!-- Category Banners -->
<!-- Category Banners -->
<div class="pt-2 pb-3">
  <div class="container">
    <div class="row">
      <% categories.slice(0, 4).forEach((category, index) => { %>
        <div class="col-sm-6">
          <div class="banner banner-overlay">
            <a href="/shop?categories=<%= category.name %>">
              <img src="<%= category.image || `assets/images/demos/demo-6/banners/banner-${index + 1}.jpeg` %>" alt="<%= category.name %>">
            </a>
            <div class="banner-content banner-content-center">
              <h4 class="banner-subtitle text-white"><a href="#">New in</a></h4>
              <h3 class="banner-title text-white"><a href="#"><strong><%= category.name %></strong></h3>
              <a href="/shop?categories=<%= category.name %>" class="btn btn-outline-white banner-link underline">Shop Now</a>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
    <hr class="mt-0 mb-0">
  </div>
</div>

  <!-- Trending Section -->
  <div class="mb-5"></div>
  <div class="container">
    <div class="heading heading-center mb-3">
      <h2 class="title">Trending</h2>
      <ul class="nav nav-pills justify-content-center" role="tablist">
        <li class="nav-item"><a class="nav-link active" id="trending-all-link" data-toggle="tab" href="#trending-all-tab" role="tab">All</a></li>
        <li class="nav-item"><a class="nav-link" id="trending-women-link" data-toggle="tab" href="#trending-women-tab" role="tab">Women</a></li>
        <li class="nav-item"><a class="nav-link" id="trending-men-link" data-toggle="tab" href="#trending-men-tab" role="tab">Men</a></li>
      </ul>
    </div>

    <div class="tab-content tab-content-carousel">
      <!-- All Trending Products -->
      <div class="tab-pane p-0 fade show active" id="trending-all-tab" role="tabpanel">
        <div class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow" data-toggle="owl" data-owl-options='{
            "nav": false,
            "dots": true,
            "margin": 20,
            "loop": false,
            "responsive": {
              "0": { "items": 2 },
              "480": { "items": 2 },
              "768": { "items": 3 },
              "992": { "items": 4 },
              "1200": { "items": 4, "nav": true, "dots": false }
            }
          }'>
          <% trendingProducts.forEach(product => { %>
            <div class="product product-7 text-center">
              <figure class="product-media">
                <% if (product.regularPrice > product.salePrice) { %>
                  <span class="product-label label-sale">Sale</span>
                <% } %>
                <a href="/productDetails/<%= product._id %>">
                  <img src="/uploads/re-image/<%= product.productImage[0] %>" alt="<%= product.productName %>" class="product-image">
                  <img src="/uploads/re-image/<%= product.productImage[1] || product.productImage[0] %>" alt="<%= product.productName %>" class="product-image-hover">
                </a>
                <div class="product-action-vertical">
                  <a href="#" class="btn-product-icon btn-wishlist btn-expandable"><span>Add to Wishlist</span></a>
                </div>
                <div class="product-action">
                  <a href="#" class="btn-product btn-cart"><span>Add to Cart</span></a>
                </div>
              </figure>
              <div class="product-body">
                <div class="product-cat"><a href="/shop?categories=<%= product.category.name %>"><%= product.category.name %></a></div>
                <h3 class="product-title"><a href="/productDetails/<%= product._id %>"><%= product.productName %></a></h3>
                <div class="product-price">
                  <% if (product.regularPrice > product.salePrice) { %>
                    <span class="new-price">$<%= product.salePrice %></span>
                    <span class="old-price">Was $<%= product.regularPrice %></span>
                  <% } else { %>
                    $<%= product.salePrice %>
                  <% } %>
                </div>
              </div>
            </div>
          <% }) %>
        </div>
      </div>

      <!-- Women Trending -->
      <div class="tab-pane p-0 fade" id="trending-women-tab" role="tabpanel">
        <div class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow" data-toggle="owl" data-owl-options='{
            "nav": false,
            "dots": true,
            "margin": 20,
            "loop": false,
            "responsive": {
              "0": { "items": 2 },
              "480": { "items": 2 },
              "768": { "items": 3 },
              "992": { "items": 4 },
              "1200": { "items": 4, "nav": true, "dots": false }
            }
          }'>
          <% trendingProducts.filter(p => p.category.name.toLowerCase().includes('women')).forEach(product => { %>
            <div class="product product-7 text-center">
              <figure class="product-media">
                <% if (product.regularPrice > product.salePrice) { %>
                  <span class="product-label label-sale">Sale</span>
                <% } %>
                <a href="/productDetails/<%= product._id %>">
                  <img src="/uploads/re-image/<%= product.productImage[0] %>" alt="<%= product.productName %>" class="product-image">
                  <img src="/uploads/re-image/<%= product.productImage[1] || product.productImage[0] %>" alt="<%= product.productName %>" class="product-image-hover">
                </a>
                <div class="product-action-vertical">
                  <a href="#" class="btn-product-icon btn-wishlist btn-expandable"><span>Add to Wishlist</span></a>
                </div>
                <div class="product-action">
                  <a href="#" class="btn-product btn-cart"><span>Add to Cart</span></a>
                </div>
              </figure>
              <div class="product-body">
                <div class="product-cat"><a href="/shop?categories=<%= product.category.name %>"><%= product.category.name %></a></div>
                <h3 class="product-title"><a href="/productDetails/<%= product._id %>"><%= product.productName %></a></h3>
                <div class="product-price">
                  <% if (product.regularPrice > product.salePrice) { %>
                    <span class="new-price">$<%= product.salePrice %></span>
                    <span class="old-price">Was $<%= product.regularPrice %></span>
                  <% } else { %>
                    $<%= product.salePrice %>
                  <% } %>
                </div>
              </div>
            </div>
          <% }) %>
        </div>
      </div>

      <!-- Men Trending -->
      <div class="tab-pane p-0 fade" id="trending-men-tab" role="tabpanel">
        <div class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow" data-toggle="owl" data-owl-options='{
            "nav": false,
            "dots": true,
            "margin": 20,
            "loop": false,
            "responsive": {
              "0": { "items": 2 },
              "480": { "items": 2 },
              "768": { "items": 3 },
              "992": { "items": 4 },
              "1200": { "items": 4, "nav": true, "dots": false }
            }
          }'>
          <% trendingProducts.filter(p => p.category.name.toLowerCase().includes('men')).forEach(product => { %>
            <div class="product product-7 text-center">
              <figure class="product-media">
                <% if (product.regularPrice > product.salePrice) { %>
                  <span class="product-label label-sale">Sale</span>
                <% } %>
                <a href="/productDetails/<%= product._id %>">
                  <img src="/uploads/re-image/<%= product.productImage[0] %>" alt="<%= product.productName %>" class="product-image">
                  <img src="/uploads/re-image/<%= product.productImage[1] || product.productImage[0] %>" alt="<%= product.productName %>" class="product-image-hover">
                </a>
                <div class="product-action-vertical">
                  <a href="#" class="btn-product-icon btn-wishlist btn-expandable"><span>Add to Wishlist</span></a>
                </div>
                <div class="product-action">
                  <a href="#" class="btn-product btn-cart"><span>Add to Cart</span></a>
                </div>
              </figure>
              <div class="product-body">
                <div class="product-cat"><a href="/shop?categories=<%= product.category.name %>"><%= product.category.name %></a></div>
                <h3 class="product-title"><a href="/productDetails/<%= product._id %>"><%= product.productName %></a></h3>
                <div class="product-price">
                  <% if (product.regularPrice > product.salePrice) { %>
                    <span class="new-price">$<%= product.salePrice %></span>
                    <span class="old-price">Was $<%= product.regularPrice %></span>
                  <% } else { %>
                    $<%= product.salePrice %>
                  <% } %>
                </div>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
    </div>
  </div>

  <!-- Deal of the Day -->
  <div class="deal bg-image pt-8 pb-8" style="background-image: url(assets/images/demos/demo-6/deal/bg-1.jpg);">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-sm-12 col-md-8 col-lg-6">
          <div class="deal-content text-center">
            <h4>Limited quantities.</h4>
            <h2>Deal of the Day</h2>
            <div class="deal-countdown" data-until="+10h"></div>
          </div>
          <div class="row deal-products">
            <% dealProducts.forEach(product => { %>
              <div class="col-6 deal-product text-center">
                <figure class="product-media">
                  <a href="/productDetails/<%= product._id %>">
                    <img src="/uploads/re-image/<%= product.productImage[0] %>" alt="<%= product.productName %>" class="product-image">
                  </a>
                </figure>
                <div class="product-body">
                  <h3 class="product-title"><a href="/product/<%= product._id %>"><%= product.productName %></a></h3>
                  <div class="product-price">
                    <span class="new-price">$<%= product.salePrice %></span>
                    <% if (product.regularPrice > product.salePrice) { %>
                      <span class="old-price">Was $<%= product.regularPrice %></span>
                    <% } %>
                  </div>
                </div>
                <a href="/shop" class="action">Shop Now</a>
              </div>
            <% }) %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- New Arrivals -->
  <div class="mb-6"></div>
  <div class="container">
    <h2 class="title text-center mb-4">New Arrivals</h2>
    <div class="products">
      <div class="row justify-content-center">
        <% newArrivals.forEach(product => { %>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="product product-7 text-center">
              <figure class="product-media">
                <% if (product.regularPrice > product.salePrice) { %>
                  <span class="product-label label-sale">Sale</span>
                <% } %>
                <a href="/productDetails/<%= product._id %>">
                  <img src="/uploads/re-image/<%= product.productImage[0] %>" alt="<%= product.productName %>" class="product-image">
                  <img src="/uploads/re-image/<%= product.productImage[1] || product.productImage[0] %>" alt="<%= product.productName %>" class="product-image-hover">
                </a>
                <div class="product-action-vertical">
                  <a href="#" class="btn-product-icon btn-wishlist btn-expandable"><span>Add to Wishlist</span></a>
                </div>
                <div class="product-action">
                  <a href="#" class="btn-product btn-cart"><span>Add to Cart</span></a>
                </div>
              </figure>
              <div class="product-body">
                <div class="product-cat"><a href="/shop?categories=<%= product.category.name %>"><%= product.category.name %></a></div>
                <h3 class="product-title"><a href="/productDetails/<%= product._id %>"><%= product.productName %></a></h3>
                <div class="product-price">
                  <% if (product.regularPrice > product.salePrice) { %>
                    <span class="new-price">$<%= product.salePrice %></span>
                    <span class="old-price">Was $<%= product.regularPrice %></span>
                  <% } else { %>
                    $<%= product.salePrice %>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
    <div class="more-container text-center mt-2">
      <a href="/shop" class="btn btn-outline-dark-2 btn-more"><span>Show More</span></a>
    </div>
  </div>
</main>

<%- include("../../views/partials/user/footer") %>